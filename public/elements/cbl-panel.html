<link rel="import" href="../../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../../bower_components/iron-pages/iron-pages.html">

<link rel="import" href="cbl-shared-styles.html">
<link rel="import" href="cbl-app-behavior.html">
<link rel="import" href="cbl-grid.html">
<link rel="import" href="cbl-challenge-card.html">

<dom-module id="cbl-panel">
  <template>
    <style include="cbl-shared-styles">
      :host {
        display: block;

        --paper-tab-content: {
          font-weight: inherit !important;
        };
      }

      paper-tabs {
        background-color: #fff;
      }

      cbl-grid {
        margin: 4px;
      }
    </style>

    <paper-tabs selected="{{tab}}" hide-scroll-buttons noink scrollable>
      <paper-tab><iron-icon icon="create"></iron-icon> Challenges</paper-tab>
      <paper-tab>Questions</paper-tab>
      <paper-tab>Activities</paper-tab>
      <paper-tab>Resources</paper-tab>
    </paper-tabs>

    <cbl-grid id="grid">
      <template is="dom-repeat" items="[[items]]">
        <cbl-challenge-card challenge="[[item]]"></cbl-challenge-card>
      </template>
    </cbl-grid>

  </template>
  <script>
    Polymer({
      is: 'cbl-panel',

      behaviors: [CBLAppBehavior],

      properties: {
        tab: {
          type: Number,
          notify: true,
          value: 0
        },
        items: {
          type: Array,
          value: ['dsahjkdhsajk', 'dsahjkdhjsada', 'dsuiaydiayd7a dad ayd iady ukahdjksa dshakj dhjka ', 'ewqdauh uidhua', 'dsahudhsaiudhsada', 'dsaudhauida', 'dhsauidhwyqeq']
        }
      },

      listeners: {
        'iron-select': '_onIronSelect'
      },

      _onIronSelect: function() {
        this.items = [];
        this.loading = true;

        this.async(() => {
          let lol = [];
          for (var i = 0; i < 30; i++) {
            let haha = 'sdsa d ';
            let rand = Math.random() * 5;
            for (var j = 0; j < rand; j++) {
              haha += haha;
            };

            lol.push(haha);
          }

          this.items = lol;
          this.$.grid.arrange();
          this.$.grid.play();
          this.loading = false;
        }, 1000);
      }
    });
  </script>
</dom-module>