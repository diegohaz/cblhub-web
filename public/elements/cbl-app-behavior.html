<script>
var CBLAppBehavior = {
  properties: {
    user: {
      type: Object,
      notify: true,
      value: function() {
        return Parse.User.current();
      }
    },

    message: {
      type: String,
      notify: true
    },

    loading: {
      type: Boolean,
      notify: true,
      value: false
    }
  },

  get path() {
    return page.current;
  },

  go: function(e, state) {
    var path = '/';

    if (typeof e == 'string') {
      path = e;
    } else {
      e.preventDefault();
      var elements = Polymer.dom(e).path;

      for (var i = 0; i < elements.length; i++) {
        var el = elements[i];
        if (!el.dataset || !el.dataset.path) continue;

        var value = el.dataset.path;

        if (value) {
          path = value;
          state = el.state;
          break;
        }
      }
    }

    page(path, state);
  },

  back: function() {
    page.back('/');
  },

  _isEmpty: function() {
    var values = arguments;

    for (var i = 0; i < values.length; i++) {
      if (values[i] == '') return true;
    }

    return false;
  },

  _isEqual: function(object, value) {
    return object == value;
  }
};
</script>